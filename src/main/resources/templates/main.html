<!DOCTYPE html>
<html lang="UTF-8" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>홈</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/product/product.css}">
</head>
<body>

<div layout:fragment="content" class="container mt-5 main-content-padding">

    <!-- 에러 메시지 출력 -->
    <div th:if="${errorMessage}" class="alert alert-danger" role="alert" th:text="${errorMessage}"></div>

    <div class="row">
        <!-- 왼쪽 카테고리 바 -->
        <div class="col-md-2">
            <div class="categoryBar">
                <h5 class="mb-3">카테고리</h5>
                <div class="list-group">
                    <a th:each="category : ${viewData.categories}"
                       th:href="@{/products/category/{id}(id=${category.id})}"
                       th:text="${category.name}"
                       class="list-group-item list-group-item-action">
                    </a>
                </div>
            </div>
        </div>

        <!-- 오른쪽 콘텐츠 영역 -->
        <div class="col-md-10">

            <!-- 히어로 배너 -->
            <div class="text-center mb-5">
                <h1 class="fw-bold">믿고 거래하는 중고 마켓 <span class="text-primary">SecondHand</span></h1>
                <p class="text-muted">간편 등록! 안전 거래!</p>
                <div th:if="${viewData.loginUserId != null}">
                    <a th:href="@{/products/new}" class="btn btn-primary btn-lg mt-3">상품 등록하기</a>
                </div>
                <div th:if="${viewData.loginUserId == null}">
                    <a class="btn btn-primary btn-lg mt-3" href="#" id="loginProductBtn">상품
                        등록하기</a>
                </div>
            </div>

            <div class="d-flex justify-content-end mb-4">
                <a class="btn btn-outline-primary me-2"
                   th:href="@{/?sort=latest}"
                   th:classappend="${viewData.currentSort == 'latest'} ? ' active'">
                    최신순
                </a>
                <a class="btn btn-outline-primary"
                   th:href="@{/?sort=likes}"
                   th:classappend="${viewData.currentSort == 'likes'} ? ' active'">
                    좋아요순
                </a>
            </div>

            <!-- 최신 등록 상품 -->
            <div class="mb-5">

                <div th:replace="fragments/product-card :: cardList(${viewData.products})"></div>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/fragments/layout.js}"></script>
</body>
</html>
